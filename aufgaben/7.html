<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="de" lang="de"><!-- InstanceBegin template="../Templates/navigation.dwt" codeOutsideHTMLIsLocked="false" -->
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<!-- InstanceBeginEditable name="doctitle" --><title>cKurs: Arrays (Vektoren)</title><!-- InstanceEndEditable -->
		<link href="../css/styles.css" rel="stylesheet" type="text/css" />
	    <!-- InstanceBeginEditable name="head" --><!-- InstanceEndEditable -->

	</head>
	<body> <center> <div id="Layer2"><div id="CkursHeader"> <h1> CKurs - Aufgaben zu C </h1></div>
	<div id="CKursSearch">
	<!-- SiteSearch Google --><!-- SiteSearch Google -->
<form method="get" action="http://www.ckurs.de/suchergebnisse.html" target="_top">
<table border="0">
<tr><td nowrap="nowrap" valign="top" align="left" height="32">
<a href="http://www.google.com/">
<img src="http://www.google.com/logos/Logo_25wht.gif" border="0" alt="Google" align="middle"></img></a>
<br/>
<input type="hidden" name="domains" value="www.ckurs.de"></input>
<label for="sbi" style="display: none">Geben Sie Ihre Suchbegriffe ein</label>
<input type="text" name="q" size="31" maxlength="255" value="" id="sbi"></input>
<label for="sbb" style="display: none">Suchformular senden</label>
<input type="submit" name="sa" value="Suchen" id="sbb"></input>
</td></tr>
<tr>
<td nowrap="nowrap">
<table>
<tr>
<td>
<input type="radio" name="sitesearch" value="" checked id="ss0"></input>
<label for="ss0" title="Web-Suche"><font size="-1" color="#000000">Web</font></label></td>
<td>
<input type="radio" name="sitesearch" value="www.ckurs.de" id="ss1"></input>
<label for="ss1" title="Suchen www.ckurs.de"><font size="-1" color="#000000">www.ckurs.de</font></label></td>
</tr>
</table>
<input type="hidden" name="client" value="pub-2804672934282785"></input>
<input type="hidden" name="forid" value="1"></input>
<input type="hidden" name="ie" value="UTF-8"></input>
<input type="hidden" name="oe" value="UTF-8"></input>
<input type="hidden" name="flav" value="0000"></input>
<input type="hidden" name="sig" value="rWi2uceVD70agyuX"></input>
<input type="hidden" name="cof" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFCC;LBGC:336699;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;FORID:11"></input>
<input type="hidden" name="hl" value="de"></input>
</td></tr></table>
</form>
<!-- SiteSearch Google -->
</div></div><div id="Layer4"> <div id="Layer1">
    <p><a href='../index.htm' title='Hauptseite' >Hauptseite</a></p>
    <p>&Uuml;bungen</p>
    <blockquote>
    <p><a href='1.html' title='&Uuml;bung 1' >1</a></p>
    <p><a href='2.html' title='&Uuml;bung 2' >2</a></p>
    <p><a href='3.html' title='&Uuml;bung 3' >3</a></p>
    <p><a href='4.html' title='&Uuml;bung 4' >4</a></p>
    <p><a href='5.html' title='&Uuml;bung 5' >5</a></p>
    <p><a href='6.html' title='&Uuml;bung 6' >6</a></p>
    <p><a href='7.html' title='&Uuml;bung 7' >7</a></p>
    <p><a href='8.html' title='&Uuml;bung 8' >8</a></p>
    <p><a href='9.html' title='&Uuml;bung 9' >9</a></p>
    </blockquote>
    <p><a href='../impressum.html' title='Impressum' >Impressum</a></p>
    <p><a href="http://users.skynet.be/mgueury/mozilla/"> <img src="http://users.skynet.be/mgueury/mozilla/tidy_16.gif"
  alt="Validated by HTML Validator (based on Tidy) " height="16" width="39"/> </a></p>
    <p><a href="/Partner.html">Partner</a></p>
	</div><div id="Layer3"> <!-- InstanceBeginEditable name="EditRegion3" --><div class="fold_Aufgabe">
    <p>Dynamische Speicher-Allokation</p>
    <div class="fold_Aufgabenstellung">
    <p>Aufgabenstellung:<br />
  &nbsp;<br />
  &nbsp;Schreiben Sie bitte ein C-Programm, das  den Mittelwert einer unbekannten Anzahl von Versuchsmesswerten berechnet. Die  Versuchsmesswerte vom Typ (double) m&uuml;ssen aus einer Datei &quot;data.txt&quot;  gelesen werden. Die Funktion zur Berechnung des Mittelwerts ist folgendermassen  definiert:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </p>
    <div class="fold_CCode">
    <p>CCode:</p>
    double average(double data[],  int count); </div>
    <p> Nutzen Sie bitte die M&scaron;glichkeit der dynamischen Speicher-Allokation mit Hilfe  der Funktionen malloc() und free() zum Speichern der gelesenen Messwerte aus.  Der alloziierte Speicher soll immer um weitere 10 Elemente erweitert werden,  wann immer er voll wird. Nachdem alle Messwerte aus der Datei  &quot;data.txt&quot; gelesen und in das dynamische Array gespeichert sind, wird  die Funktion average() aufgerufen, um den Mittelwert zu berechnen. </p>
    </div><div class="fold_Antwort">
    <p>L&ouml;sung</p>
    <p>HINWEIS: Anstatt der Funktion free() wurde realloc() verwendet. Dadurch kann ein l&auml;stiges Umkopieren der Daten erspart werden. </p>
    <div class="fold_CCode">
    <p>CCode:</p>
    #include &lt;stdio.h&gt;
    
    <p>double average(double data[],  int count){<br />
      int i;<br />
      double summe=0;<br />
      for (i=0;i&lt;count;i++)<br />
      summe+=data[i];<br />
      return summe/(count);<br />
      }<br />
    </p>
    <p>int main()<br />
      {<br />
      double *data;<br />
      int count=0;<br />
      int datasize=10;<br />
      double actdata;<br />
      FILE *fdata;<br />
      if ((fdata = fopen(&quot;data.txt&quot;, &quot;r&quot;)) == NULL)<br />
      {<br />
      fprintf(stderr, &quot;Datenfile kann nicht gefunden werden. \n&quot;);<br />
      return -1;<br />
      }<br />
      count=0;<br />
      data=(double*)malloc(sizeof(double)*datasize);<br />
      while(fscanf(fdata,&quot;%lf&quot;,&amp;actdata)!=EOF){<br />
      count++;<br />
  <br />
      if (count &gt; datasize) {<br />
      datasize+=10;<br />
      data=(double*)realloc(data,sizeof(double)*datasize);<br />
      }<br />
      data[count-1]=actdata; <br />
      }</p>
    <p> printf(&quot;%f&quot;,average(data,count));<br />
      return 0;<br />
      } </p>
    </div>
    <p>Hinweis: Hier wurde die headderdatei weggelassen. </p>
    <div class="fold_Ausgabe">
    <p>Ausgabe stdout:</p>
    <p>9.962963</p>
    </div>
    <p>&nbsp; </p>
    </div></div>
	<p><br />
</p>
	<!-- InstanceEndEditable --></div><script type ="text/javascript" src="../js/dynafold.js"></script>
    <p>&nbsp;</p>
<div id="Layer5"><script type="text/javascript"><!--
google_ad_client = "pub-2804672934282785";
google_ad_width = 728;
google_ad_height = 90;
google_ad_format = "728x90_as";
google_ad_type = "text_image";
google_ad_channel = "";
google_color_border = "FFFFFF";
google_color_bg = "FFFFCC";
google_color_link = "0000FF";
google_color_text = "000000";
google_color_url = "008000";
google_ui_features = "rc:0";
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script></div>
</div></center></body>
<!-- InstanceEnd --></html>